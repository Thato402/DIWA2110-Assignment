{"ast":null,"code":"import _objectSpread from\"C:/Users/DELL/track/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Dashboard(){const[products,setProducts]=useState([]);useEffect(()=>{axios.get('/products').then(res=>{console.log('Fetched products:',res.data);setProducts(res.data.map(p=>_objectSpread(_objectSpread({},p),{},{hasImage:!!p.image})));}).catch(err=>console.error('Error fetching products:',err));},[]);const handleImageChange=(e,productId)=>{const file=e.target.files[0];if(file){const reader=new FileReader();reader.onloadend=()=>{axios.put(\"/products/\".concat(productId),{image:reader.result}).then(res=>{console.log('Updated product:',res.data);setProducts(products.map(p=>p.id===productId?_objectSpread(_objectSpread({},res.data),{},{hasImage:!!res.data.image}):p));}).catch(err=>console.error('Error uploading image:',err));};reader.readAsDataURL(file);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-container\",children:products.map(product=>{var _product$price;return/*#__PURE__*/_jsxs(\"div\",{className:\"card \".concat(product.hasImage?'has-image':''),children:[product.image&&/*#__PURE__*/_jsx(\"img\",{src:product.image,alt:product.name}),/*#__PURE__*/_jsx(\"h3\",{children:product.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Quantity: \",product.quantity]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: M\",((_product$price=product.price)===null||_product$price===void 0?void 0:_product$price.toFixed(2))||'N/A']}),!product.hasImage&&/*#__PURE__*/_jsx(\"div\",{className:\"card-edit\",children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:e=>handleImageChange(e,product.id)})})]},product.id);})})]});}export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","Dashboard","products","setProducts","get","then","res","console","log","data","map","p","_objectSpread","hasImage","image","catch","err","error","handleImageChange","e","productId","file","target","files","reader","FileReader","onloadend","put","concat","result","id","readAsDataURL","className","children","product","_product$price","src","alt","name","quantity","price","toFixed","type","accept","onChange"],"sources":["C:/Users/DELL/track/frontend/src/components/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction Dashboard() {\r\n  const [products, setProducts] = useState([]);\r\n\r\n  useEffect(() => {\r\n    axios.get('/products')\r\n      .then(res => {\r\n        console.log('Fetched products:', res.data);\r\n        setProducts(res.data.map(p => ({ ...p, hasImage: !!p.image })));\r\n      })\r\n      .catch(err => console.error('Error fetching products:', err));\r\n  }, []);\r\n\r\n  const handleImageChange = (e, productId) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        axios.put(`/products/${productId}`, { image: reader.result })\r\n          .then(res => {\r\n            console.log('Updated product:', res.data);\r\n            setProducts(products.map(p => p.id === productId ? { ...res.data, hasImage: !!res.data.image } : p));\r\n          })\r\n          .catch(err => console.error('Error uploading image:', err));\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"content\">\r\n      <h2>Dashboard</h2>\r\n      <div className=\"card-container\">\r\n        {products.map(product => (\r\n          <div key={product.id} className={`card ${product.hasImage ? 'has-image' : ''}`}>\r\n            {product.image && <img src={product.image} alt={product.name} />}\r\n            <h3>{product.name}</h3>\r\n            <p>Quantity: {product.quantity}</p>\r\n            <p>Price: M{product.price?.toFixed(2) || 'N/A'}</p>\r\n            {!product.hasImage && (\r\n              <div className=\"card-edit\">\r\n                <input\r\n                  type=\"file\"\r\n                  accept=\"image/*\"\r\n                  onChange={(e) => handleImageChange(e, product.id)}\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}